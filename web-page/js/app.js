let canvas,video,ctx,imgData;function videolink(){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(e=>{video.srcObject=e,video.play(),canvas.style.display="block",setInterval((function(){Photo()}),1e3)}).catch(()=>{console.log("No camera access!")})}function Photo(){!async function(){const e=await bodyPix.load({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}),t=await e.segmentPersonParts(video,{flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7});let o=[],a=[];for(let e=0;e<canvas.width*canvas.height;e++)pix=t.data[e],pix>1&pix<10|pix>11?t.data[e]=-1:0==pix|1==pix?(t.data[e]=0,o.push(e)):10==pix|11==pix&&(t.data[e]=10,a.push(e));if(console.log("face:"),console.log(o),console.log("palms:"),console.log(a),a.length<o.length){const e=n(o,a);console.log(e),"Yes!"==e&&audio.play()}else{const e=n(a,o);console.log(e),"Yes!"==e&&audio.play()}function n(e,t){let o,a,n,s,i,r,l;if(console.log("Searching is started"),l=100,i=e.length,r=parseInt(i/2),t[0]>e[i-1])return"No-cross!";if(t[i-1]<e[0])return"No-cross!";console.log("crossed-somewhere");for(let l=0;l<t.length;l++){if(o=t[l],a=r,n=a,s=-1,o==e[0])return"Yes!";if(o==e[i-1])return"Yes!";if(o==e[r])return"Yes!";for(;n!=s;)if(o>e[a]){if(a>=r){if(s=n,n=a,a+=parseInt((i-a)/2),Math.abs(e[a]-o)<100)return"Yes!"}else if(a<r&&(s=n,n=a,a+=parseInt((r-a)/2),Math.abs(e[a]-o)<100))return"Yes!"}else if(o<e[a])if(a>r){if(s=n,n=a,a-=parseInt((a-r)/2),Math.abs(e[a]-o)<100)return"Yes!"}else if(a<=r&&(s=n,n=a,a-=parseInt(a/2),Math.abs(e[a]-o)<100))return"Yes!"}return"No-end!"}const s=bodyPix.toColoredPartMask(t);bodyPix.drawMask(canvas,video,s,.7,0,!1),console.log(t)}()}canvas=document.getElementById("canvas"),video=document.getElementById("video"),audio=document.getElementById("audio"),canvas.getContext("2d")?(ctx=canvas.getContext("2d"),videolink()):alert('You browser does not support canvas.getContext("2d")'),setInterval(Photo(),60);